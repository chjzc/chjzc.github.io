<!DOCTYPE html>
<html>
<head>
	<!<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<!<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
	<script type="text/javascript" src="http://ajax.microsoft.com/ajax/jquery/jquery-1.4.min.js"></script>
    <script type="text/javascript" src="./operation.js"></script>
    <script type="text/javascript" src="./stack_graph.js"></script>
	<style type="text/css">
	button {
		position: absolute;
		right: 10px;
		top: 10px;
	}
	body, html,#allmap {width: 100%;height: 100%;overflow: hidden;margin:0;}
	</style>
</head>
<body>
	<div id="output"></div>
	<svg id = "svg1" width = "1000" height="800"></svg>
	<button onclick="myTranslate()">Update</button>
</body>
</html>
<script type="text/javascript">
	function bumpLayer(n) 
	{
		function bump(a) 
		{
			var x = 1 / (.1 + Math.random()),
			y = 2 * Math.random() - .5,
			z = 10 / (.1 + Math.random());
			for (var i = 0; i < n; i++) 
			{
				var w = (i / n - y) * z;
				a[i] += x * Math.exp(-w * w);
			}
		}
		var a = [], i;
		for (i = 0; i < n; ++i) a[i] = 0;
		for (i = 0; i < 15; ++i) bump(a);
		return a.map(function(d, i) { return {x: i * (800 / n), y: Math.ceil(Math.max(0,d)*10.0)};});
	}

	var n = 12;
	var m = 20;
	var layer = [];
	for (var i=0;i<n;i++)
	{
		layer[i] = bumpLayer(m);
	}
    //the first case
    /*layer[0]=[{x:0,y:10},{x:40,y:10},{x:80,y:10},{x:120,y:10},{x:160,y:10}];
    layer[1]=[{x:0,y:0},{x:40,y:0},{x:80,y:40},{x:120,y:40},{x:160,y:40}];
    layer[2]=[{x:0,y:10},{x:40,y:10},{x:80,y:10},{x:120,y:10},{x:160,y:10}];
    layer[3]=[{x:0,y:10},{x:40,y:10},{x:80,y:10},{x:120,y:10},{x:160,y:10}];
    */
    // the second case
    /*layer[0]=[{x:0,y:0},{x:40,y:0},{x:80,y:0},{x:120,y:10},{x:160,y:10},{x:200,y:10}];
    layer[1]=[{x:0,y:10},{x:40,y:10},{x:80,y:10},{x:120,y:10},{x:160,y:10},{x:200,y:10}];
    layer[2]=[{x:0,y:0},{x:40,y:10},{x:80,y:10},{x:120,y:10},{x:160,y:10},{x:200,y:0}];
    layer[3]=[{x:0,y:10},{x:40,y:10},{x:80,y:10},{x:120,y:10},{x:160,y:10},{x:200,y:10}];
    layer[4]=[{x:0,y:0},{x:40,y:0},{x:80,y:10},{x:120,y:10},{x:160,y:10},{x:200,y:10}];
    layer[5]=[{x:0,y:10},{x:40,y:10},{x:80,y:10},{x:120,y:10},{x:160,y:10},{x:200,y:10}];
    layer[6]=[{x:0,y:0},{x:40,y:0},{x:80,y:0},{x:120,y:0},{x:160,y:10},{x:200,y:10}];*/
    var data1=operate(layer);



	var layer2 = [];
	for (var i=0;i<n;i++)
	{
		layer2[i] =bumpLayer(m);
	}
    var data2=operate(layer2);


	var svg = document.getElementById("svg1");
	var graph = new stackGraph();
	graph.makeStackGraph(svg,data1);
	function myTranslate()
	{
		graph['Svg'] = svg;
		graph['Data'] = data2;
		graph.Translate();
		var tmp = data1;
		data1 = data2;
		data2 = tmp;
	}
</script>















